<html lang="en">
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-166967736-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-166967736-1');
    </script>
    
    <title>Pythonプログラミングでチェスを作るメモ</title>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta property="og:url" content="https://Saito-Saito-Saito.github.io/chess/memo">
    <meta property="og:title" content="Pythonプログラミングでゲームを作るメモ">
    <meta property="og:description" content="Pythonプログラミングによって、ターミナル上で棋譜を使って実行できるチェスのゲームを制作するに当たって、備忘録を用意しました。">
    <meta name="description" content="Pythonプログラミングによって、ターミナル上で棋譜を使って実行できるチェスのゲームを制作するに当たって、備忘録を用意しました。">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="twitter:card" content="summary">
    <meta property="og:image" content="https://Saito-Saito-Saito.github.io/chess/unagi-purple483d8b/normal.JPG">
    <meta name="google-site-verification" content="d3cz5KLnsS_25m1Shebvuyb3C4FfyoFNlPXdQ3z_oXg" />

    <link rel="icon" href="https://Saito-Saito-Saito.github.io/icon.png">
    <link rel="stylesheet" href="https://Saito-Saito-Saito.github.io/chess/stylesheet.css">
</head>
<body>
    <header>
        <img src="../../unagi-top.png" alt="" width="90px">
        <div id="title">
            <h1>Pythonプログラミングで</h1>
            <h1>チェスを作る</h1>
        </div>
    </header>

    <div id="menu-bar">
        <div id="short-menu">
            <input type="checkbox" id="acd-check">
            <table>
                <tr><td><a href="https://Saito-Saito-Saito.github.io/chess">HOME</a></td><td><label for="acd-check">STAGES</label></td><td><a href="https://Saito-Saito-Saito.github.io/chess/code">CODE</a></td></tr>
            </table>
            <ul class="stages-menu">
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage1/index.html">Stage 1　プログラムの機能を考える</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage2/index.html">Stage 2　プログラムの土台を作る</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage3/index.html">Stage 3　盤面のクラスの基本機能を作る</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage4/index.html">Stage 4　駒の動きを判定する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage5/index.html">Stage 5　駒を動かす</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage6/index.html">Stage 6　勝敗を判定する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage7/index.html">Stage 7　入力の棋譜を駒の動きに変換する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage8/index.html">Stage 8　ゲームを進行する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage9/index.html">Stage 9　ゲーム進行を記録する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage10/index.html">Stage 10　記録からゲームを進める</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage11/index.html">Stage 11　全体の機能を統括する</a></li>
            </ul>
        </div>
        <div id="long-menu">
            <table>
                <tr>
                    <td><a href="https://Saito-Saito-Saito.github.io/chess/">HOME</a></td>
                    <td><label for="acd-check1">Stage 1</label></td>
                    <td><label for="acd-check2">Stage 2</label></td>
                    <td><label for="acd-check3">Stage 3</label></td>
                    <td><label for="acd-check4">Stage 4</label></td>
                    <td><label for="acd-check5">Stage 5</label></td>
                    <td><label for="acd-check6">Stage 6</label></td>
                    <td><label for="acd-check7">Stage 7</label></td>
                    <td><label for="acd-check8">Stage 8</label></td>
                    <td><label for="acd-check9">Stage 9</label></td>
                    <td><label for="acd-check10">Stage 10</label></td>
                    <td><label for="acd-check11">Stage 11</label></td>
                    <td><a href="https://Saito-Saito-Saito.github.io/chess/code">CODE</a></td>
                </tr>
            </table>
            <input type="checkbox" id="acd-check1" class="acd-check">
            <ul id="s1-menu" class="sections-menu">
                <li><span><a href="https://Saito-Saito-Saito.github.io/chess/stage1/index.html">Stage 1　プログラムの機能を考える</a></span></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage1/section1/index.html">1-1　盤面の機能を考える</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage1/section2/index.html">1-2　駒の機能を考える</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage1/section3/index.html">1-3　運営の機能を考える</a></li>
            </ul>
            <input type="checkbox" id="acd-check2" class="acd-check">
            <ul id="s2-menu" class="sections-menu">
                <li><span><a href="https://Saito-Saito-Saito.github.io/chess/stage2/index.html">Stage 2　プログラムの土台を作る</a></span></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage2/section1/index.html">2-1　ロガーを設定する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage2/section2/index.html">2-2　定数を設定する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage2/section3/index.html">2-3　インデックスが適正か判定する機能を設定する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage2/section4/index.html">2-4　文字を変換する機能を設定する</a></li>
            </ul>
            <input type="checkbox" id="acd-check3" class="acd-check">
            <ul id="s3-menu" class="sections-menu">
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage3/index.html">Stage 3　盤面のクラスの基本機能を作る</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage3/section1/index.html">3-1　コンストラクタを作る</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage3/section2/index.html">3-2　盤面を表示する</a></li>
            </ul>
            <input type="checkbox" id="acd-check4" class="acd-check">
            <ul id="s4-menu" class="sections-menu">
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage4/index.html">Stage 4　駒の動きを判定する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage4/section1/index.html">4-1　全ての駒で不可能な動きを除外する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage4/section2/index.html">4-2　ポーンの動きを判定する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage4/section3/index.html">4-3　ルーク・ナイト・ビショップ・クイーンの動きを判定する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage4/section4/index.html">4-4　キングの動きを判定する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage4/section5/index.html">4-5　駒を飛び越える動きを除外する</a></li>
            </ul>
            <input type="checkbox" id="acd-check5" class="acd-check">
            <ul id="s5-menu" class="sections-menu">
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage5/index.html">Stage 5　駒を動かす</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage5/section1/index.html">5-1　動かせない場合を除外する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage5/section2/index.html">5-2　キャスリングの例外処理をする</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage5/section3/index.html">5-3　アンパッサンの例外処理をする</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage5/section4/index.html">5-4　プロモーションの例外処理をする</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage5/section5/index.html">5-5　駒を動かす</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage5/section6/index.html">5-6　パラメーター処理をする</a></li>
            </ul>
            <input type="checkbox" id="acd-check6" class="acd-check">
            <ul id="s6-menu" class="sections-menu">
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage6/index.html">Stage 6　勝敗を判定する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage6/section1//index.html">6-1　キングの位置を特定する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage6/section2/index.html">6-2　チェックの数を数える</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage6/section3/index.html">6-3　チェックメイト・ステイルメイトを判定する</a></li>
            </ul>
            <input type="checkbox" id="acd-check7" class="acd-check">
            <ul id="s7-menu" class="sections-menu">
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage7/index.html">Stage 7　入力の棋譜を駒の動きに変換する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage7/section1/index.html">7-1　不要な文字を消去する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage7/section2/index.html">7-2　正規表現でふるいにかける</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage7/section3/index.html">7-3　動かす駒を判定する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage7/section4/index.html">7-4　移動元のマスのヒントを整理する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage7/section5/index.html">7-5　移動先とプロモーションを特定する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage7/section6/index.html">7-6　移動元の候補を列挙する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage7/section7/index.html">7-7　移動元の候補を絞り込む</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage7/section8/index.html">7-8　キャスリングの棋譜を処理する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage7/section9/index.html">7-9　勝敗の棋譜を処理する</a></li>
            </ul>
            <input type="checkbox" id="acd-check8" class="acd-check">
            <ul id="s8-menu" class="sections-menu">
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage8/index.html">Stage 8　ゲームを進行する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage8/section1/index.html">8-1　ゲームの初期設定をする</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage8/sectino2/index.html">8-2　ゲームセットを判定する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage8/section3/index.html">8-3　駒の動きを入力する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage8/section4/index.html">8-4　ヘルプを処理する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage8/section5.index.html">8-5　リザインを処理する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage8/section6/index.html">8-6　盤上で駒を動かす</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage8/section7/index.html">8-7　ゲームセットを処理する</a></li>
            </ul>
            <input type="checkbox" id="acd-check9" class="acd-check">
            <ul id="s9-menu" class="sections-menu">
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage9/index.html">Stage 9　ゲーム進行を記録する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage9/section1/index.html">9-1　記録ファイルの初期設定をする</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage9/section2/index.html">9-2　棋譜から余計な文字を削除する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage9/section3/index.html">9-3　記録ファイルに棋譜を書き込む</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage9/section4/index.html">9-4　ゲームで記録機能を運用する</a></li>
            </ul>
            <input type="checkbox" id="acd-check10" class="acd-check">
            <ul id="s10-menu" class="sections-menu">
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage10/index.html">Stage 10　記録からゲームを進める</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage10/section1/index.html">10-1　記録ファイルを読み込む</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage10/section2/index.html">10-2　棋譜の内容を解読する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage10/section3/index.html">10-3　１手戻る機能を実装する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage10/sectino4/index.html">10-4　棋譜からゲームを再現する機能を実装する</a></li>
            </ul>
            <input type="checkbox" id="acd-check11" class="acd-check">
            <ul id="s11-menu" class="sections-menu">
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage11/index.html">Stage 11　全体の機能を統括する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage11/section1/index.html">11-1　各種設定を変更させる</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/chess/stage11/section2/index.html">11-2　ウェルカムページを作る</a></li>
            </ul>
        </div>
    </div>

    <main>
        <section class="index">
            <h2>目次</h2>
            <p>
                <ul>
                    <li><a href="#vocabulary">用語</a></li>
                    <li><a href="#setup">初期配置</a></li>
                    <li><a href="#how-to-move">駒の動かし方</a></li>
                    <li><a href="#record">棋譜の書き方</a></li>
                </ul>
            </p>
        </section>

        <section id="vocabulary">
            <h2>用語</h2>
            <h3 id="castling_v">キャスリング</h3>
            <p>キングとルークを交差させるように動かすこと。<a href="#how-to-move">駒の動かし方</a>参照。</p>
            <h3 id="enpassan_v">アンパッサン</h3>
            <p>相手の 2 マス進んだポーンを通過するように取ること。<a href="#how-to-move">駒の動かし方</a>参照。</p>
            <h3 id="file_v">file; ファイル</h3>
            <p>盤面の縦長の列。クイーンサイドの端から a, b, c, .., h と番号をふる。</p>
            <h3 id="rank_v">rank; ランク</h3>
            <p>盤面の横長の行。黒側の端から 1, 2, ..., 8 と番号をふる。</p>
            <h3 id="check_v">チェック; 王手</h3>
            <p>対処しなければ次のターンで相手にキングを取られる状態。</p>
            <h3 id="checkmate_v">チェックメイト; 詰み</h3>
            <p>このターンで自分がどんな手を打っても相手のターンで自分のキングが取られる状態。</p>
            <h3 id="stalemate_v">ステイルメイト</h3>
            <p>チェックはされていないが、自らチェックされにいく他に駒の動かしようがない状態。一般にこのとき引き分けとする。</p>
            <h3 id="resign_v">リザイン; 投了</h3>
            <p>自ら負けを認めること。盤面において優勢であってもプレーヤーのリザインを適用する。</p>
            <h3 id="promotion_v">プロモーション</h3>
            <p>ポーンが一番端の <a href="#rank_v" class="memo">rank</a> までたどり着いたときに、ルーク・ナイト・ビショップ・クイーンのいずれかに成り上がること。よほどの理由がない限りクイーン。</p>
            <h3 id="Qside_v">クイーンサイド</h3>
            <p>初期配置のクイーンがいる <a href="#file_v">file</a> の方向。つまり <a href="#file_v">file</a> が減る方向。</p>
            <h3 id="Kside_v">キングサイド</h3>
            <p>初期配置のキングがいる <a href="#file_v">file</a> の方向。つまり <a href="#file_v">file</a> が増える方向。</p>
        </section>

        <section id="setup">
            <h2>初期配置</h2>
            <img src="setup.png" alt="UNAVAILABLE" width="90%" style="max-width: 380px;">
        </section>

        <section id="how-to-move">
            <h2>駒の動かし方</h2>
            <p>P ポーン</p>
            <img src="pawn.png" alt="UNAVAILABLE" width="90%" style="max-width: 180px;">
            <p>R ルーク</p>
            <img src="rook.png" alt="UNAVAILABLE" width="90%" style="max-width: 180px;">
            <p>N ナイト</p>
            <img src="knight.png" alt="UNAVAILABLE" width="90%" style="max-width: 180px;">
            <p>B ビショップ</p>
            <img src="bishop.png" alt="UNAVAILABLE" width="90%" style="max-width: 180px;">
            <p>Q クイーン</p>
            <img src="queen.png" alt="UNAVAILABLE" width="90%" style="max-width: 180px;">
            <p>K キング</p>
            <img src="king.png" alt="UNAVAILABLE" width="90%" style="max-width: 180px;">
            <p>ポーンの最初</p>
            <img src="initial_pawn.png" alt="UNAVAILABLE" width="90%" style="max-width: 180px;">
            <p>アンパッサン</p>
            <img src="enpassant.png" alt="UNAVAILABLE" width="90%" style="max-width: 180px;">
            <p>キャスリング</p>
            <img src="castling.png" alt="UNAVAILABLE" width="90%" style="max-width: 280px;">
        </section>

        <section id="record">
            <h2>棋譜の書き方</h2>
            <p>
                <pre>
In order to study chess properly, and also to play in leagues and tournaments, you need to be able to read and write chess moves. There are a few ways to record chess moves, but on this site we will be using standard algebraic notation, which is the notation required by FIDE (the international chess federation).
                
-- The board
In algebraic notation, we use a system of alphanumeric co-ordinates to identify each square. The ranks (horizontal rows) are identified with numbers starting from white's side of the board, and the files (vertical columns) are identified by letters, starting from white's left. On the board below, co-ordinates are displayed for every square.
                
    a   b   c   d   e   f   g   h
   -------------------------------
8 | a8| b8| c8| d8| e8| f8| g8| h8| 8
   -------------------------------
7 | a7| b7| c7| d7| e7| f7| g7| h7| 7
   -------------------------------
6 | a6| b6| c6| d6| e6| f6| g6| h6| 6
   -------------------------------
5 | a5| b5| c5| d5| e5| f5| g5| h5| 5
   -------------------------------
4 | a4| b4| c4| d4| e4| f4| g4| h4| 4
   -------------------------------
3 | a3| b3| c3| d3| e3| f3| g3| h3| 3
   -------------------------------
2 | a2| b2| c2| d2| e2| f2| g2| h2| 2
   -------------------------------
1 | a1| b1| c1| d1| e1| f1| g1| h1| 1
   -------------------------------
    a   b   c   d   e   f   g   h
                
The co-ordinates are the same whether you are looking at the board from white's perspective or black's.
                
-- Recording a move
With the exception of the knight, each piece is represented by the first letter of its name, capitalised. Knight starts with the same letter as king, so for the knights we use the letter N instead. When we record a move, we record the piece that is being moved, and the square that the piece is being moved to. For example:
                
    Bc4 - Bishop moves to the c4 square.
    Nf3 - Knight moves to the f3 square.
    Qc7 - Queen moves to the c7 square.
                    
The only exception to this is pawn moves. When a pawn moves, we don't normally bother to record the P, just the square that the pawn is moving to. For example:
                
    e4 - pawn moves to the e4 square.
    g6 - pawn moves to the g6 square.
                    
If the pawn has reached the far side of the board and promoted, use an '=' sign to show which piece it was promoted to. For example:
                
    b8=Q - pawn moves to the b8 square and promotes to a queen.
    h1=N - pawn moves to the h1 square and promotes to a knight.
                    
Simple enough so far. There are also a couple of extra symbols used to indicate certain things about a move. To indicate a capture, we place an 'x' symbol beween the piece and the square, for example:
                
    Rxf5 - Rook captures a piece on the f5 square.
    Kxd2 - King captures a piece on the d2 square.
                    
When a pawn is capturing, we use the letter of the file it is moving from, then the x, then the square it is moving to. For example:
                
    gxf6 - Pawn on the g-file captures a piece on the f6 square.
    exd5 - Pawn on the e-file captures a piece on the d5 square.
                    
If the pawn is making an en passant capture, we record the square that the pawn finished on, not the square of the captured pawn. You can also add 'e.p.' after the move to indicate en passant if you want, but this isn't mandatory. For example:
                
    exd6 - Pawn captures a pawn on d5 en passant. The pawn finishes its move on d6.
    gxh6 e.p. - Pawn captures a pawn on h5 en passant. The pawn finishes its move on h6.
                    
To indicate that a move is check, just add a '+' symbol on the end. If it's a double check, you can add ++ if you like, but just one will do. If the it's a checkmate, use the '#' symbol instead. Here are some examples:
                
    Ba3+ - Bishop moves to a3 and gives check.
    Qxh7# - Queen captures a piece on h7 and checkmates the black king.
    f3+ - Pawn moves to f3 and gives check.
                    
Sometimes, two different piece of the same type could move to the same square. To specify which piece is to move, add the letter of the file the piece is moving from. Here are some examples:
                
    Rad1 - Rook on the a-file moves to d1.
    Nbxd2 - Knight on the b-file captures a piece on d2.
    Rfe1+ - Rook on the f-file moves to e1 and gives check.
                    
What about if both pieces are on the same file as well? In this case, put the number of the starting rank for the piece that is moving, instead of the file letter. Here are some examples:
                
    R7e4 - Rook on the seventh rank moves to e4.
    N1xc3 - Knight on the first rank captures a piece on c3.
                
Castling is recorded differently to the other moves. For kingside castling, record it as O-O and for queenside castling, record it as O-O-O.
                
When a game has been annotated, some symbols are used to indicate that a particular move is good or bad. We don't normally use these when recording a game in a tournament (it might be offputting to your opponent to see what you think of his moves). The symbols are as follows:
                
    ! - Good move.
    !! - Brilliant move.
    ? - Poor move.
    ?? - Terrible move.
    !? - Interesting move.
    ?! - Dubious move.
                
from <a href="www.chessstrategyonline.comcontent/tutorials/basic-chess-concepts-chess-notation">www.chessstrategyonline.comcontent/tutorials/basic-chess-concepts-chess-notation</a>
                    </pre>
                </p>
        </section>

    </main>

    <footer>
        <ul>
            <li>LAST UPDATE: 2020/09/10</li>
            <li><a href="https://Saito-Saito-Saito.github.io" target="_blank">解説一覧</a></li>
            <li><a href="https://github.com/Saito-Saito-Saito" target="_blank">このページの作成者のGitHub</a></li>
            <li><a href="https://twitter.com/zsops_n" target="_blank">このページの作成者のTwitter</a></li>
            <li><a href="#">トップに戻る</a></li>
        </ul>
    </footer>
</body>
</html>