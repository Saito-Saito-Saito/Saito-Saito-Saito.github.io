<html lang="ja">
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-166967736-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-166967736-1');
    </script>

    <title>Pythonプログラミングで2048を作る　3-4</title>
    
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta property="og:url" content="https://Saito-Saito-Saito.github.io/2048/stage3/section4">
    <meta property="og:title" content="Pythonプログラミングで2048を作る　3-4">
    <meta name="og:description" content="Pythonプログラミングによって、ターミナル上で実行できる2048を制作します。ここでは盤面を表示する機能を実装します。">
    <meta name="description" content="Pythonプログラミングによって、ターミナル上で実行できる2048を制作します。ここでは盤面を表示する機能を実装します。">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="twitter:card" content="summary_large_image"/>
    <meta property="og:image" content="https://Saito-Saito-Saito.github.io/2048/unagi-pink800000/normal.JPG">

    <link rel="icon" href="https://Saito-Saito-Saito.github.io/icon.png">
    <link rel="stylesheet" href="../../stylesheet.css">
</head>
<body>
    <header>
        <div id="title">
            <h1>Pythonプログラミングで</h1>
            <h1>2048を作る</h1>
        </div>
    </header>

    <div id="menu-bar">
        <div id="short-menu">
            <input type="checkbox" id="acd-check">
            <table>
                <tr><td><a href="https://Saito-Saito-Saito.github.io/chess">HOME</a></td><td><label for="acd-check">STAGES</label></td><td><a href="https://Saito-Saito-Saito.github.io/2048/code">CODE</a></td>
                </tr>
            </table>
            <ul class="stages-menu">
                <li><a href="https://Saito-Saito-Saito.github.io/2048/stage1">Stage 1　プログラムの機能を考える</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/2048/stage2">Stage 2　プログラムの土台を作る</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/2048/stage3">Stage 3　盤面のクラスの基本機能を作る</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/2048/stage4">Stage 4　盤面を動かす</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/2048/stage5">Stage 5　ゲームの終了を判定する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/2048/stage6">Stage 6　ゲーム進行を実装する</a></li>
            </ul>
        </div>
        <div id="long-menu">
            <table>
                <tr>
                    <td><a href="https://Saito-Saito-Saito.github.io/chess/">HOME</a></td>
                    <td><label for="acd-check1">Stage 1</label></td>
                    <td><label for="acd-check2">Stage 2</label></td>
                    <td><label for="acd-check3">Stage 3</label></td>
                    <td><label for="acd-check4">Stage 4</label></td>
                    <td><label for="acd-check5">Stage 5</label></td>
                    <td><label for="acd-check6">Stage 6</label></td>
                    <td><a href="https://Saito-Saito-Saito.github.io/2048/code">CODE</a></td>
                </tr>
            </table>
            <input type="checkbox" id="acd-check1" class="acd-check">
            <ul id="s1-menu" class="sections-menu">
                <li><a href="https://Saito-Saito-Saito.github.io/2048/stage1">Stage 1　プログラムの機能を考える</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/2048/stage1/section1">1-1　盤面の機能を考える</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/2048/stage1/section2">1-2　動きの機能を考える</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/2048/stage1/section3">1-3　ゲーム進行の機能を考える</a></li>
            </ul>
            <input type="checkbox" id="acd-check2" class="acd-check">
            <ul id="s2-menu" class="sections-menu">
                <li><a href="https://Saito-Saito-Saito.github.io/2048/stage2">Stage 2　プログラムの土台を作る</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/2048/stage2/section1">2-1　ロガーを設定する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/2048/stage2/section2">2-2　定数を設定する</a></li>
            </ul>
            <input type="checkbox" id="acd-check3" class="acd-check">
            <ul id="s3-menu" class="sections-menu">
                <li><a href="https://Saito-Saito-Saito.github.io/2048/stage3">Stage 3　盤面のクラスの基本機能を作る</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/2048/stage3/section1">3-1　新しい数を挿入する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/2048/stage3/section2">3-2　コンストラクタを作る</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/2048/stage3/section3">3-3　インデックスが適正か判断する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/2048/stage3/section4">3-4　盤面を表示する</a></li>
            </ul>
            <input type="checkbox" id="acd-check4" class="acd-check">
            <ul id="s4-menu" class="sections-menu">
                <li><a href="https://Saito-Saito-Saito.github.io/2048/stage4">Stage 4　盤面を動かす</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/2048/stage4/section1">4-1　概観を把握する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/2048/stage4/section2">4-2　4 通りの場合わけをして盤面を動かす</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/2048/stage4/section3">4-3　場合わけを統合したメソッドを実装する</a></li>
            </ul>
            <input type="checkbox" id="acd-check5" class="acd-check">
            <ul id="s5-menu" class="sections-menu">
                <li><a href="https://Saito-Saito-Saito.github.io/2048/stage5">Stage 5　ゲームの終了を判定する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/2048/stage5/section1">5-1　ゲームクリアを判定する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/2048/stage5/section2">5-2　手詰まりを判定する</a></li>
            </ul>
            <input type="checkbox" id="acd-check6" class="acd-check">
            <ul id="s6-menu" class="sections-menu">
                <li><a href="https://Saito-Saito-Saito.github.io/2048/stage6">Stage 6　ゲーム進行を実装する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/2048/stage6/section1">6-1　ゴールやサイズの設定を変更する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/2048/stage6/section2">6-2　スタートメニューを実装する</a></li>
                <li><a href="https://Saito-Saito-Saito.github.io/2048/stage6/section3">6-3　ゲーム進行を実装する</a></li>
            </ul>
        </div>
    </div>

    <main>
        
        <section id="s3-3">
            <h1>Stage 3　盤面のクラスの基本機能を作る</h1>
            <h2>3-4　盤面を表示する</h2>
            <section class="sub-section">
                <p>おつぎは print <a href="https://Saito-Saito-Saito.github.io/memorandom/class#method_v" class="memo" target="_new">メソッド</a>です。文字通り盤面を表示する機能になります。とりあえずどのような形になるかご覧いただきましょうかね。</p>
                <img src="board-example.png" alt="UNAVAILABLE" width="90%" style="max-width: 350px;">
                <div class="unagi">
                    <img src="../../unagi-pink800000/normal.JPG" alt="">
                    <div class="balloon">
                        <p>しょっぼ</p>
                    </div>
                </div>
                <p>コードはこんなんです。</p>
                <div class="real-code">
                    <pre>
                        <code>
    def print(self):
        print('\n-', end='')
        for row in range(self.size):
            print('--------', end='')
        print('')   # to a new line
        for row in range(self.size):
            print('|', end='')
            for col in range(self.size):
                if self.board[row][col] == EMPTY:
                    print('       |', end='')
                else:
                    print(' {} '.format(self.board[row][col]).center(7) + '|', end='')
            print('\n-', end='')  # to new line
            for col in range(self.size):
                print('--------', end='')
            print('')  # to a new line
        print('')   # to a new line
        return SUCCEEDED
                        </code>
                    </pre>
                </div>
                <div class="unagi">
                    <img src="../../unagi-pink800000/normal.JPG" alt="">
                    <div class="balloon">
                        <p>なっが</p>
                    </div>
                </div>
                <p>おたくのいう「ショボい」グラフィックスをきれいにするともっと長くなりますよ。それでは早速取り掛かりましょう。</p>
            </section>
            <p class="snake-line">~~~~~~~~~~~~~~~</p>
            <section class="sub-section">
                <p>まず他の行と分けて見やすくするため最初は改行を入れます。</p>
                <div class="real-code">
                    <pre>
                        <code>
    def print(self):
        print('<span style="font-weight: bold;">\n</span>-', end='')
                        </code>
                    </pre>
                </div>
                <div class="unagi">
                    <img src="../../unagi-pink800000/normal.JPG" alt="">
                    <div class="balloon">
                        <p>改行文字の隣のハイフンは何なん？</p>
                    </div>
                </div>
                <p>盤面の内外を仕切る横線です。これは盤面のサイズによって長さが変わるようにしなければいけません。例えば 6 × 6 マスになったらこんな感じに。</p>
                <img src="board-ex6.png" alt="UNAVAILABLE" width="90%" style="max-width: 400px;">
                <p>この長さを調節するために最初の 1 個だけを入れたものです。</p>
                <div class="unagi">
                    <img src="../../unagi-pink800000/normal.JPG" alt="">
                    <div class="balloon">
                        <p>じゃあ残りの大量のハイフンはどうやってコーディングするんだよ</p>
                    </div>
                </div>
                <p>盤面の大きさ self.size に合わせて for 文で後ろにハイフンをつないでいく形になります。</p>
                <div class="real-code">
                    <pre>
                        <code>
        for row in range(self.size):
            print('--------', end='')
                        </code>
                    </pre>
                </div>
                <p>print は文末改行がデフォルトですから、必ず <code>end=''</code> をつけてくださいね。最後まで終わったら <code>print('')</code> でただただ改行するだけ。</p>
                <div class="real-code">
                    <pre>
                        <code>
        for row in range(self.size):
            print('--------', end='')
        <span style="font-weight: bold;">print('')   # to a new line</span> 
                        </code>
                    </pre>
                </div>
            </section>
            <p class="snake-line">~~~~~~~~~~~~~~~</p>
            <section class="sub-section">
                <p>ここからは board のマスごとの作業をするつもりで進めていきます。まず最初に <a href="https://Saito-Saito-Saito.github.io/2048/memo/#row_v" class="memo" target="_new">row</a> を、その中に <a href="https://Saito-Saito-Saito.github.io/2048/memo/#column_v" class="memo" target="_new">column</a> を、という 2 重の for ループ構造にします。</p>
                <div class="real-code">
                    <pre>
                        <code>
        <span style="font-weight: bold;">for row in range(self.size):</span> 
            print('|', end='')
            <span style="font-weight: bold;">for col in range(self.size):</span> 
                if self.board[row][col] == EMPTY:
                ...
                        </code>
                    </pre>
                </div>
                <p>各 row のはじめに、盤面の内外を隔てる縦の仕切りを入れます。</p>
                <div class="real-code">
                    <pre>
                        <code>
        for row in range(self.size):
            <span style="font-weight: bold;">print('|', end='')</span> 
            for col in range(self.size):
                        </code>
                    </pre>
                </div>
                <p>この時も <code>end=''</code>をお忘れなきよう。というか、ここから先は大体改行しませんので、書くクセをつけてしまってください。</p>
                <p>各 <a href="https://Saito-Saito-Saito.github.io/2048/memo/#column_v" class="memo" target="_new">column</a> のループに入ったら、マスに入っている数字で場合わけします。</p>
                <div class="real-code">
                    <pre>
                        <code>
            for col in range(self.size):
                <span style="font-weight: bold;">if self.board[row][col] == EMPTY:
                    print('       |', end='')
                else:
                    print(' {} '.format(self.board[row][col]).center(7) + '|', end='')</span> 
                print('\n-', end='')  # to new line
                        </code>
                    </pre>
                </div>
                <p>上の写真でお見せしましたけれども、EMPTY のマスには何も入れません。</p>
                <div class="unagi">
                    <img src="../../unagi-pink800000/normal.JPG" alt="">
                    <div class="balloon">
                        <p>空白入れろってことやろ</p>
                    </div>
                </div>
                <p>右端の縦線はマスとマスを区切る仕切りになります。</p>
                <p>一方 board[col][row] の値が EMPTY ではない場合、その数字を具体的に表示しなければなりません。ただ、マスの端っこに申し訳なさそうにおいておくのではなくて、堂々とマスの中央に数字を書きたいじゃないですか。なので <a href="https://Saito-Saito-Saito.github.io/memorandom/Python/str#center" class="memo" target="_new">center</a> メソッドを使ってあげてください。</p>
                <div class="real-code">
                    <pre>
                        <code>
                else:
                    print(<span style="font-weight: bold;">' {} '.format(self.board[row][col]).center(7)</span> + '|', end='')
                        </code>
                    </pre>
                </div>
                <p>ここでの空白などの文字数は上のコードをコピペするのでもいいのですが、実際にご自分で「これくらいだろ」と数字を入れてみて、サイズが合わなかったら調節する、そんな実験的アプローチがいいと思います。</p>
                <div class="unagi">
                    <img src="../../unagi-pink800000/normal.JPG" alt="">
                    <div class="balloon">
                        <p>え〜、めんどくさ</p>
                    </div>
                </div>
                <p>そもそも何もないところからコーディングするときはそうしますからね。</p>
            </section>
            <p class="snake-line">~~~~~~~~~~~~~~~</p>
            <section class="sub-section">
                <p><a href="https://Saito-Saito-Saito.github.io/2048/memo/#column_v" class="memo" target="_new">column</a> ごとの for ループが終了したら、あとは上のマスと下のマスの間の仕切りとなる横棒を入れてあげておしまいです。</p>
                <div class="real-code">
                    <pre>
                        <code>
                else:
                    print(' {} '.format(self.board[row][col]).center(7) + '|', end='')
            <span style="font-weight: bold;">print('\n-', end='')  # to new line
            for col in range(self.size):
                print('--------', end='')</span>
            print('')  # to a new line
                        </code>
                    </pre>
                </div>
                <p>冒頭でやったように board.size に合わせて長さを変えてください。改行して <a href="https://Saito-Saito-Saito.github.io/2048/memo/#row_v" class="memo" target="_new">row</a> のループを抜け、そして全て表示し終わったら最後にもう一度改行しましょう。</p>
                <div class="real-code">
                    <pre>
                        <code>
            for col in range(self.size):
                print('--------', end='')
            print('')  # to a new line
        print('')   # to a new line
        return SUCCEEDED
                        </code>
                    </pre>
                </div>
                <p>これ以降に入ってくる文字列と盤面の間隔を開けるためです。</p>
                <p>全部終わったら「表示成功」SUCCEEDED をリターンしてください。いや、別にリターン値使うことないからなんでもいいんですが。</p>
                <div class="unagi">
                    <img src="../../unagi-pink800000/normal.JPG" alt="">
                    <div class="balloon">
                        <p>じゃあリターンする必要ねーじゃん</p>
                    </div>
                </div>
                <p>まあそうですね。おっしゃる通りです。</p>
            </section>
        </section>

        <section>
            <p><a href="../../stage4/index.html">NEXT　Stage 4　盤面を動かす</a></p>
        </section>
    </main>

    <footer>
        <ul>
            <li>LAST UPDATE: 2020/09/25</li>
            <li><a href="https://Saito-Saito-Saito.github.io" target="_blank">解説一覧</a></li>
            <li><a href="https://github.com/Saito-Saito-Saito" target="_blank">このページの作成者のGitHub</a></li>
            <li><a href="https://twitter.com/zsops_n" target="_blank">このページの作成者のTwitter</a></li>
            <li><a href="#">トップに戻る</a></li>
        </ul>
    </footer>
</body>
</html>