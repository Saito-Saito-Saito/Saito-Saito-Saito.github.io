<html lang="ja">
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-166967736-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-166967736-1');
    </script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>これであなたもサイトが作れる 4</title>
    <link rel="stylesheet" href="../stylesheet.css">
</head>
<body>
    <header>
        <div id="title">
            <h1>これであなたも</h1>
            <h1>サイトが作れる</h1>
        </div>
        
        <ul>
            <li><a href="https://saito-saito-saito.github.io/website">Stage 0&1</a></li>
            <li><a href="https://saito-saito-saito.github.io/website/stage2">Stage 2</a></li>
            <li><a href="https://saito-saito-saito.github.io/website/stage3">Stage 3</a></li>
            <li><a href="#">Stage 4</a></li>
            <li><a href="https://saito-saito-saito.github.io/website/stage5">Stage 5</a></li>
            <li><a href="https://github.com/Saito-Saito-Saito/Saito-Saito-Saito.github.io" target="_blank">Code</a></li>
        </ul>
    </header>
    
    <div class="acd-menu">
        <input type="checkbox" id="acd-check">
        <label for="acd-check" class="acd-label">MENU</label>
        <ul class="acd-content">
            <li><a href="https://saito-saito-saito.github.io/website">Stage 0&1</a></li>
            <li><a href="https://saito-saito-saito.github.io/website/stage2">Stage 2</a></li>
            <li><a href="https://saito-saito-saito.github.io/website/stage3">Stage 3</a></li>
            <li><a href="#">Stage 4</a></li>
            <li><a href="https://saito-saito-saito.github.io/website/stage5">Stage 5</a></li>
            <li><a href="https://github.com/Saito-Saito-Saito/Saito-Saito-Saito.github.io" target="_blank">Code</a></li>
        </ul>
    </div>

   <main>
       <section id="s4">
           <h1>Stage 4　アコーディオンメニューを作る</h1>
           <p>前回までであらかたページは出来上がりました。しかしスマホで見るとき他のページにジャンプできないっていうのは、おそらく皆さんの想像以上に大変です。我々ただコードを書くだけじゃなく、しっかりプログラムが作動しているかテストしなければいけないので、ページ遷移は閲覧者以上に必要になります。</p>
           <p>ですが画面が広いときのようにタイトルの右にリンクを貼るスペースがありません。そこで今回作るのはアコーディオンメニューと呼ばれるものです。ほら、こういうの。</p>
           <div class="acd">
               <input type="checkbox" id="checkbox">
               <label for="checkbox"><a>これであなたも</a></label>
               <ul class="contents">
                   <li>いろいろ作れる</li>
                   <li>チェスが作れる</li>
                   <li>リバーシが作れる</li>
                   <li>サイトが作れる</li>
               </ul>
           </div>
           <p>少し勉強した方なら「これ Javascript 使うんだろうな」と思っていることでしょうけれども、今回あれは使いません。Javascript だとわずかにでもサイトが重くなるので、css を使います。そう難しいことではないですよ。</p>
       </section>

       <section class="index">
           <h2>目次</h2>
           <p>
               <ul>
                   <li><a href="#s4-1">4-1　HTML ファイルの設定</a></li>
                   <li><a href="#s4-2">4-2　css ファイルの設定</a></li>
                   <li><a href="#s4-3">4-3　動作の設定</a></li>
               </ul>
           </p>
       </section>

       <section id="s4-1">
           <h2>4-1　HTML ファイルの設定</h2>
           <p>とりあえずコードをみてください。一番上の checkbox は皆さんのご想像の通り四角いマスにレ点を入れるものです。見た方が早いですかね。</p>
           <p>
               <input type="checkbox" style="text-align: center;">
           </p>
           <p>ただここでは単にスイッチの役割をしています。閲覧者には見せません。詳しい話はあとでしましょう。</p>
           <p>その次が label 要素。ここをクリックするとチェックボックスにチェックを入れたり外したりできます。ちょうどこんな具合に。</p>
           <p>
               <input type="checkbox" id="example">
               <label for="example">CLICK HERE</label>
           </p>
           <p>もちろんチェックボックス本体をクリックしてもレ点のつけ外しはできますが、label (上では CLICK HERE の文字のところ)をクリックしてもつけたり外したりできるようになっています。for 属性は「自分をクリックしたときに影響を与える相手の id」を表しています。今コーディングしている場所で言えば「acd-label クラスの label をクリックすると、その for が指し示す acd-check のレ点がつけ外しされる」ということになります。</p>
           <p>そしてリストが後続するという流れになっています。もちろん中身はヘッダーのリンクと同じです。とりあえず今のところは深く考えずに、「こういうのをセットするんだ」くらいに思っておくのがいいでしょう。</p>
       </section>

       <section id="s4-2">
           <h2>4-2　css ファイルの設定</h2>
           <p>さて、css に移りましょう。stylesheet.scss に移っていただいて、まずはヘッダーにリンクが表示されなくなる 970 px で場合分けしましょう。ここまででわからないことがある方は <a href="https://saito-saito-saito.github.io/website/stage3">Stage 3</a> に戻って復習してくださいね。</p>
           <p>最初は画面幅が 970 px 以下、つまりヘッダーにリンクが表示されない場合を見ていきます。このときアコーディオンメニューでリンクを表示しますので、そのスタイルを設定しなければいけません。acd-menu クラス全体についてまずは考えましょう。雰囲気としてはヘッダーの一部っぽく見せたいので、文字色は白を引継ぎます。acd-menu クラス全体に背景をセットするとアコーディオンが開く前から背景色で塗り潰されますのでご注意を。背景は子要素にそれぞれ設定します。 position の意味はこのあとすぐに出てきます。</p>
           <p>ここからは acd-label と acd-content の両クラスについて、閉じていても開いていても適用されるスタイルを書いていきます。まずは acd-label ですね。先頭の position: absolute; は relative に設定した acd-menu を基準にどんな位置に表示するかを決めています。ここでは right と top を 0 にしていますから、acd-label は acd-menu の上端と右端を合わせて配置されます。つまり右上の角が合うってこと。余白はやはり実験して調べてください。背景はヘッダーと同じにします。右寄せしたいので text-align も右に。フォントサイズは少し小さいくらいがちょうどいい。残った二つは 4-2 で取り扱います。</p>
           <p>acd-content もやることは大差ありません。余白は実験で。文字は右揃え。背景はヘッダーと同色。リンクなのでリストスタイルはなし。残った二つは 4-2 で。加えて a をいつも通りに設定します。</p>
           <p>今度は acd-check に入ります。これはあくまでスイッチとして扱うので、ユーザーには見せません。それが display: none; です。このスイッチとしての機能を使って、メニューの開閉に応じたスタイルの設定を施していきます。</p>
           <p>最初にラベルをいじりましょう。:not(...) で ... ではないセレクタを表すので、そのまま「チェックの入っていない #acd-check」を意味します。その後の "+" は「直後の弟要素」です。つまり、カッコの中では #acd-check の直後にある弟要素の .acd-label のスタイルを書くことになります。要は「閉まっているときのラベル」ですね。幅や行間は実験してください。残りは 4-2 で。</p>
           <p>次は「チェックの入っている #acd-check の直後にある弟要素の .acd-label」のスタイルですね。幅や余白は皆さんにお任せして、transition-delay はやっぱり 4-2 でやります。</p>
           <p>今度は「チェックの入っていない #acd-check の直後にある弟要素の .acd-label の直後にある弟要素の .acd-content」です。大丈夫ですか。メニューが閉じているときのコンテンツですよ。メニューを閉じているので当然ユーザーに見せるわけにはいきませんから、visibility: hidden; を入れてください。height: 0; を設定しておかないと、ヘッダーと本文の間に不自然な余白ができます。transition-delay は...。説明不要ですね。</p>
           <p>最後にチェックがついているときのコンテンツ、つまりは開いているときのスタイルです。トップを 25 px としているのは実験の賜物です。position: absolute; を入れないと動かせませんのでご注意を。今回はメニューを見せますから、visibility: visible; は必須です。高さや幅はしっかり設定しておくべきようです。どうもバグったりするようなので。transition-delay は（略）。</p>
           <p>ここまではヘッダーにメニューが表示されない場合のスタイルでした。ヘッダーに表示されるときは新しくメニューをつける必要がありませんので、display: none; ですね。</p>
       </section>

       <section id="s4-3">
           <h2>4-3　動作の設定</h2>
           <p>さて、これで形はできました。ただ現時点ではカクカクと動いてどうも味気ないので、アニメーションをつけて動かしてみたいなと思います。なんというかヌルッと動かしてみたいですね。あまり手のこんだものを作るつもりはないので、animation の導入はしません。transition という機能を使います。開閉関係なしに適用するラベルとコンテンツのスタイルに transition: .5s; としてみてください。これで動かしてみると、なんとなくヌルッと動いてくれるようになりましたね。いい調子です。</p>
           <p>ただ、ラベルとコンテンツが一緒に開くと若干パッとしないですよね。まずメニューを開くときは先にラベルの幅が伸びてからコンテンツが開くようにします。具体的には、チェックのついていない場合の acd-label に transition-delay: .5s; を、acd-content に transition-delay: 0; を書き加えます。これで一度実行してみてください。いい感じでしょ？</p>
           <p>閉じる時も同じようにしましょう。まずはコンテンツを閉じて、それからラベルを縮めようと思います。コンマ 5 秒と 0 を入れ替えます。これでやると、なんということでしょう。うまくいっているではありませんか。</p>
           <p>ここで新しい問題が出てきました。メニューを閉じるときにコンテンツの文字が一瞬ヘッダーにかぶるんですよね。「ウソ!?」と思った方はよくみてください。これはどうにかしたいですね。そこで使うのが z-index です。これに整数を設定することで、「表に出す要素」の優先順位をつけることができるようになります。数字が大きいほど表です。今回、コンテンツを裏に回したいので acd-content で 0 に、acd-label と header で 1 にします。これでうまいことアコーディオンメニューが働くようになりましたね。</p>
       </section>

       <section>
           <h2>次回予告</h2>
           <p>これでサイトは一通りできました。ここで満足してもいいんですが、せっかくサイトを作ったので公開したくはありませんか。そこで次回は GitHub Pages というサービスを使って、みなさんが書いたページをアップロードします。</p>
           <p>次回　Stage 5　ページをアップロードする</p>
       </section>
   </main>
    
    <footer>
        <ul>
            <li>LAST EDITED: 2020/5/13</li>
            <li><a href="https://saito-saito-saito.github.io" target="_blank">解説一覧</a></li>
            <li><a href="https://github.com/Saito-Saito-Saito" target="_blank">このページの作成者のGitHub</a></li>
            <li><a href="https://twitter.com/zsops_n" target="_blank">このページの作成者のTwitter</a></li>
            <li><a href="#">トップに戻る</a></li>
        </ul>
    </footer>
</body>
</html>