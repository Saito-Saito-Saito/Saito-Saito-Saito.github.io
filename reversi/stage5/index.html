<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>これであなたもリバーシが作れる 5</title>
    <link rel="stylesheet" href="../stylesheet.css">
</head>
<body>
    <header>
        <div id="title">
            <h1>これであなたも</h1>
            <h1>リバーシが作れる</h1>
        </div>

        <ul>
            <li><a href="../index.html">Stage 0&1</a></li>
            <li><a href="../stage2/index.html">Stage 2</a></li>
            <li><a href="../stage3/index.html">Stage 3</a></li>
            <li><a href="../stage4/index.html">Stage 4</a></li>
            <li><a href="#">Stage 5</a></li>
        </ul>
    </header>

    <main>
        <section id="s5">
            <h1>Stage 5　パスと勝敗を判別する</h1>
            <p>今回は Board クラスの中でも、あんまり出番がないようで実はめちゃめちゃ頑張ってる passjudge, gamesetjudge と、あんまり出番がないようでホントに出番が少ない countpiece の 3 つのメソッドを扱います。これでようやく Board クラスのすべてのコーディングが終わりますよ。いや、「ようやく」なんて言っちゃいけない。<a href="../../chess/index.html" target="_blank">チェス</a>の時は Stage 3 から最後の Stage 9 までこういうクラスにお世話になったんだから。ああ、もう思い出したくもねえ。</p>
        </section>

        <section class="index">
            <h2>目次</h2>
            <p>
                <ul>
                    <li><a href="#s5-1">5-1　パスを判別する</a></li>
                    <li><a href="#s5-2">5-2　石を数える</a></li>
                    <li><a href="#s5-3">5-3　ゲームセットを判別する</a></li>
                </ul>
            </p>
        </section>

        <section id="s5-1">
            <h2>5-1　パスを判別する</h2>
            <p>リバーシにおいてパスは「どこにも石を置けない」状態で避けては通れないものであり、またこの状況でないと許されないものでもあります。したがって「どこにも石を置けないか、実は置けるマスがあるのか」これを判別する機能が欲しいわけです。それをするのが passjudge メソッドというわけです。</p>
            <p>やることはとても単純で、すべてのマスをシラミつぶしに眺めて石を置けないか確認しているだけです。とりあえず下に概略を書いておきましょう。</p>
            <img src="PJflowchart.png" alt="UNAVAILABLE" width="90%" style="max-width: 350px;">
            <p>もうこれでわかりましたよね。解説要りませんよね。要りますか。欲しがりですねぇ。</p>
            <p>まず大外の 2 重 for ループですべてのマスをめぐっています。もし [row, col] に石があったら、そのマスには石をおくことができませんから continue しちゃってください。マスが空いていたら <a href="../stage4/index.html#s4-4">4-4</a> と同じ要領でマスに石を置けるか確認します。もし石が置けるようでしたら、「player はパスなんかしないでそこのマスに石置きなさい」ということになりますので、「パスはできない」Flaase をリターンです。</p>
            <p>もしすべてのマスを巡って全部のループを抜けても、どこにも置き場所がないということになれば、「パスしないといけない」True をリターンしちゃってください。</p>
        </section>

        <section id="s5-2">
            <h2>5-2　石を数える</h2>
            <p>気が早いですがゲームセットになった時にお互いの石の数を数え上げる機能を作りましょう。簡単です。ただただすべてのマスを巡って白黒の石の数を数え上げるだけですよ。宿題にしたって物足りないくらいですよね。</p>
            <p>ただし、リターンするのは [黒の石の数, 白の石の数] という形のリストです。流石にこれくらいは解説しとかないとスペースがもったいない。</p>
        </section>

        <section id="s5-3">
            <h2>5-3　ゲームセットを判別する</h2>
            <p>ゲームセットになるのは</p>
            <p>
                <ul>
                    <li>マスが全部埋め尽くされたとき</li>
                    <li>互いにどのマスにも石を置けないとき</li>
                </ul>
            </p>
            <p>ですから、結局は「両方がパスしなければいけない場合」とまとめることができますね。いや、「互いにどのマスにも置けない」でいいんですけれども、私の説明の意図を考えてくださいよ。さっき作った passjudge 是非ともここで使いたいでしょ。</p>
            <p>そうとわかればこんなに簡単なことはありません。どちらか一方でもパスできない状況にあれば False を、そうでなければ True をリターンですね。</p>
            <p>クラスのコンストラクタ __init__ で game_status というのをこしらえてございすので、その値をいじくっておきましょう。「ゲームセット」って言ってんですから GAME_SET に書き換えるだけです。簡単でしょ。</p>
        </section>

        <section>
            <h2>次回予告</h2>
            <p>今回ろくに解説することありませんでしたね。でもいいんですよ。「リバーシなんて作るの簡単じゃん。俺でもできるわ」っていう方が増えていただければ、私のコードなんか見なくても自分で作るようになりますから。そもそもこのサイトだって、「プログラミングの入門はできたけど、とりあえず何すればいいかわからない」という方に向けた材料提供に過ぎませんし。</p>
            <p>次回で完結します。流石に今回ほど説明することがないとはいきませんが、気楽に見てってください。そんなもんでいいんです。プログラマーの体力はバグ直しに温存しておくものですよ。</p>
            <p>次回　Stage 6　ゲームを運用する</p>
        </section>
    </main>
    
    
    <footer>
        <ul>
            <li>LAST UPDATE: 2020/5/4</li>
            <li><a href="https://github.com/Saito-Saito-Saito" target="_blank">このページの作成者の GitHub</a></li>
            <li><a href="https://twitter.com/zsops_n" target="_blank">このページの作成者の Twitter</a></li>
            <li><a href="#">トップへ</a></li>
        </ul>
    </footer>
</body>
</html>