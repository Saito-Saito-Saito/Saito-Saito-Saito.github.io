<html lang="ja">
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-166967736-1"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-166967736-1');
    </script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>これであなたもリバーシが作れる 2</title>
    <link rel="stylesheet" href="../stylesheet.css">
</head>
<body>
    <header>
        <div id="title">
            <h1>これであなたも</h1>
            <h1>リバーシが作れる</h1>
        </div>

        <ul>
            <li><a href="https://saito-saito-saito.github.io/reversi">Stage 0&1</a></li>
            <li><a href="#">Stage 2</a></li>
            <li><a href="https://saito-saito-saito.github.io/reversi/stage3">Stage 3</a></li>
            <li><a href="https://saito-saito-saito.github.io/reversi/stage4">Stage 4</a></li>
            <li><a href="https://saito-saito-saito.github.io/reversi/stage5">Stage 5</a></li>
            <li><a href="https://saito-saito-saito.github.io/reversi/stage6">STage 6</a></li>
            <li><a href="https://github.com/Saito-Saito-Saito/reversi" target="_blank">Code</a></li>
        </ul>
    </header>

    <div class="acd-menu">
        <input type="checkbox" id="acd-check">
        <label for="acd-check" class="acd-label">MENU</label>
        <ul class="acd-content">
            <li><a href="https://saito-saito-saito.github.io/reversi">Stage 0&1</a></li>
            <li><a href="#">Stage 2</a></li>
            <li><a href="https://saito-saito-saito.github.io/reversi/stage3">Stage 3</a></li>
            <li><a href="https://saito-saito-saito.github.io/reversi/stage4">Stage 4</a></li>
            <li><a href="https://saito-saito-saito.github.io/reversi/stage5">Stage 5</a></li>
            <li><a href="https://saito-saito-saito.github.io/reversi/stage6">STage 6</a></li>
            <li><a href="https://github.com/Saito-Saito-Saito/reversi" target="_blank">Code</a></li>
        </ul>
    </div>

    <main>
        <section id="s2">
            <h1>Stage 2　プログラムの機能を考える</h1>
            <p>前回は私説明をサボりまくりましたから、今度はしっかり仕事しますよ。ええ、ちゃんとしますよ。ほら、下見てご覧なさい。しっかり説明してるじゃないですか。だから「詐欺」とか「フラグ」とか言わない。</p>
            <p>今回の目的はあくまで「機能を考える」ことにあります。ですからコーディングは一切しません。いや、本当ですって。だから疑うくらいなら下見て確かめてごらんなさいって。いや、「今度こそ詐欺」とか言わないの。次回はしっかり ... ああ、もう</p>
            <p class="stress">お前ら少し黙れ</p>
            <p>あっ、すいませんでした。ついつい本音 ... じゃねえや。もうこれ以上喋ると墓穴掘るんでやめときます。やめます。だからやめm</p>
        </section>

        <section class="index">
            <h2>目次</h2>
            <p>
                <ul>
                    <li><a href="#s2-1">2-1　盤面</a></li>
                    <li><a href="#s2-2">2-2　操作</a></li>
                    <li><a href="#s2-3">2-3　ゲーム進行</a></li>
                </ul>
            </p>
        </section>

        <section id="s2-1">
            <h2>2-1　盤面</h2>
            <p>プログラミングでボードゲームを作るときの常套手段として見覚えのある方も多いでしょうが、2 次元配列で盤面を表すというのはコーディング界隈の定石だと考えていただければと思います。具体的には</p>
            <p>
                <pre>
                    <code>
board = [row][column]
                    </code>
                </pre>
            </p>
            <p>の形がいいんじゃないかと。row は横長の行、column は縦長の列を表します。ここで注意していただきたいのが、この row や column は 0 スタートです。冷静になって考えれば board のインデックスになっていますから当然なのですが、この後も散々出てきてはコードにバグの卵を産み落とす厄介な危険因子となっておりますので、充分注意してください。</p>
            <p>また、クラスで盤面の情報を一括管理してしまおうと考えています。オブジェクト指向の練習になりますし、後になって「やべえ、もう一つ盤面作らないとグチャグチャになる」なんてグチャグチャな状況になたないようにするためにも、この手法はとっておきたいところ。</p>
            <p>我々は残念ながら「石をおきたいマスをクリックして」なんて高度な処理に対応する技術はありませんから、コマンドプロンプト(ターミナル)という画面でやる必要があります。みなさんが「ハッカーのパソコン画面」と聞いて真っ先に思い浮かべるあれです。「えー、そんなのムリムリ」って思うかもしれませんけれども、私も最初はそう思ってましたから、問題ないでしょう。不安なら勉強してきたらどうですか。そんなたいそうな知識は不要ですよ。第一、Python だとテキストエディタ(コーディングするアプリケーション)の上で実行できますから、不要っちゃ不要です。</p>
            <p>で、何の話かと言いますと、「盤面のこの位置」という具合にマス目を特定する手段が必要になります。そこで写真のような盤面を想定しています。</p>
            <img src="img.png" alt="UNAVAILABLE" width="90%" style="max-width: 350px;">
            <p>横長の行は数字で、縦長の列はアルファベットで番号をふって、"a3", "f6" みたいにマス目を指定する。わかりやすいでしょう。ということで、盤面の位置を特定するのはこれでいきます。</p>
        </section>

        <section id="s2-2">
            <h2>2-2　操作</h2>
            <p>プレーヤーがやるリバーシの操作はとても単純です。石を置けるマスを一つ選んで指定するだけですから。なのでプレーヤーに要求する操作はないに等しいのであまり考えなくていいのですが、問題はコンピューターにやらせる操作です。計算しかできないこの堅物に「突き当たるまで石をひっくり返して。もしひっくり返せる石がなかったらそのマスに石は置けないよ」なんて言ったところで理解してくれるわけがないので、そこは骨を折らなければいけません。ではどのようにルールを教え込むか。</p>
            <p>ここは後出し感が出てしまうことを承知の上で私の答えを出してしまいます。再起処理を使うんです。どういうことかというと、</p>
            <p>
                <ul>
                    <li>隣の石を見る</li>
                    <li>もし同じ色なら、もう一つ隣の石を見る</li>
                    <li>もし石がなかったら、裏返せない</li>
                    <li>もし相手の石があったら、裏返せる</li>
                </ul>
            </p>
            <p>というふうに。わからないですか。わからないですよね。ではこの説明は Stage 4 にとっておきましょう。</p>
            <p>ところで石の色ってどうすればいいでしょうか。これは「黒が 1, 白が -1, 石がなければ 0」として、board[row][column] の値にしてしまえばいいのではないでしょうか。こちらは割と定石チックなので、すんなり理解していただけるかと思われます。まあ、今分からなくてもじきに理解できますよ。</p>
        </section>

        <section id="s2-3">
            <h2>2-3　ゲーム進行</h2>
            <p>ゲームをどのように進めるかを考えます。とは言っても、そんな難しいことではなくて、「while ループで決着つくまでずっと白黒石を置かせればいいかな」とでも思っていれば十分です。なお、どこにも石を置けない時はパスしなければいけないルールがありますので、それは忘れずに実装するよう覚えておいてください。</p>
        </section>

        <section>
            <h2>次回予告</h2>
            <p>結局今回もあまり説明っぽい説明はしませんでしたね。次回からはしっかりコーディングしますから、万が一テキストエディタなど準備が整っていない人は、次へ行く前に終わらせておいてください。</p>
            <p>それともう一つ。次回はしょっぱなからクラスを使います。「そんなもん見たことねー」という方は必ず勉強してきてください。そんなに難しいことではありませんよ。私も前作のチェスで初めて使ったんですが、結構すんなり使いこなせてしまいました。天才の皆さんなら「こんなもん恐るるにたらねえザコじゃん」と一眼見て気づくでしょうし、天才でなくても時間をかければ気づくと思います。とにかく、オブジェクト指向は私のコードでは必須です。</p>
            <p><a href="https://saito-saito-saito.github.io/reversi/stage3">次回　Stage 3　盤面をつくる</a></p>
        </section>
    </main>
    
    <footer>
        <ul>
            <li>LAST UPDATE: 2020/5/6</li>
            <li><a href="https://saito-saito-saito.github.io">解説一覧</a></li>
            <li><a href="https://github.com/Saito-Saito-Saito" target="_blank">このページの作成者の GitHub</a></li>
            <li><a href="https://twitter.com/zsops_n" target="_blank">このページの作成者の Twitter</a></li>
            <li><a href="#">トップへ</a></li>
        </ul>
    </footer>
</body>
</html>